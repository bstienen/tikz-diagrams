\documentclass[tikz]{standalone}
\standaloneconfig{border=0.3cm}
\usepackage[utf8]{inputenc}

\usetikzlibrary{positioning}
\usetikzlibrary{shapes.geometric}
\tikzstyle{blok} = [
  rectangle, minimum width=1.0cm, minimum height=0.75cm, thin, draw=black,
]

\begin{document}

\tikzset{arrow/.style={-stealth, thin, draw=black}}
\begin{tikzpicture}

% Putting z^A through network
\node        (za) at (0.7, 6.0) {$z^A_i$};
\node[blok]  (nn) at (2.2, 6.0) {NN};
\draw[arrow] (za) -- (nn);
\draw[arrow] (nn) -- (3.75, 6.0) -- (3.75, 5.15);
\draw[arrow] (nn) -- (4.25, 6.0) -- (4.25, 5.00);
\draw[arrow] (nn) -- (4.75, 6.0) -- (4.75, 5.43);
\draw[arrow] (nn) -- (5.25, 6.0) -- (5.25, 5.10);
\draw[arrow] (nn) -- (5.75, 6.0) -- (5.75, 4.66);

% Derivative of g plot
\node        (gprime) at (3.2, 7.6) {$g'$};
\draw[arrow, thick]      (3.5, 4.3) -- (3.5, 7.5);
\draw[arrow, thick]      (3.3, 4.5) -- (6.5, 4.5);
%% Bins
\draw[dashed, draw=gray]            (4.0, 4.5) -- (4.0, 7.5);
\draw[dashed, draw=gray]            (4.5, 4.5) -- (4.5, 7.5);
\draw[dashed, draw=gray]            (5.0, 4.5) -- (5.0, 7.5);
\draw[dashed, draw=gray]            (5.5, 4.5) -- (5.5, 7.5);
\draw[dashed, draw=gray]            (6.0, 4.5) -- (6.0, 7.5);
\node at (3.5, 4.2) {\footnotesize{0.0}};
\node at (6.0, 4.2) {\footnotesize{1.0}};
%% Heights
\draw[semithick, draw=red] (3.5, 5.08) -- (4.0, 5.08);
\draw[semithick, draw=red] (4.0, 4.93) -- (4.5, 4.93);
\draw[semithick, draw=red] (4.5, 5.36) -- (5.0, 5.36);
\draw[semithick, draw=red] (5.0, 5.03) -- (5.5, 5.03);
\draw[semithick, draw=red] (5.5, 4.59) -- (6.0, 4.59);
\draw[dashed] (3.5, 7.0) -- (6.5, 7.0);
\node at (3.2, 7.0) {\footnotesize{1.0}};
%% Axis labels
\node at (4.9, 4.1) {$z_i^{B,j}$};

% Integrate arrow
\draw[arrow, semithick] (6.8, 6.0) -- (7.9, 6.0);
\node                at (7.3, 6.3) {Integrate};

% g plot
\node        (gprime) at (8.2, 7.6) {$g$};
\draw[arrow, thick]      (8.5, 4.3) -- (8.5, 7.5);
\draw[arrow, thick]      (8.3, 4.5) -- (11.5, 4.5);
%% Bins
\draw[dashed, draw=gray]            (9.0,  4.5) -- (9.0,  7.5);
\draw[dashed, draw=gray]            (9.5,  4.5) -- (9.5,  7.5);
\draw[dashed, draw=gray]            (10.0, 4.5) -- (10.0, 7.5);
\draw[dashed, draw=gray]            (10.5, 4.5) -- (10.5, 7.5);
\draw[dashed, draw=gray]            (11.0, 4.5) -- (11.0, 7.5);
\node at (8.5, 4.2) {\footnotesize{0.0}};
\node at (11.0, 4.2) {\footnotesize{1.0}};
%% Function
\draw[semithick, draw=red] (8.5,  4.5) -- (9.0,  5.08) -- (9.5,  5.51) -- (10.0, 6.38) -- (10.5, 6.91) -- (11.0, 7.00);
\draw[dashed] (8.5, 7.0) -- (11.5, 7.0);
\node at (8.2, 7.0) {\footnotesize{1.0}};
%% Axis labels
\node at (9.9, 4.1) {$z_i^{B,j}$};

% z^B
\node        (zb1) at (0.7, 3.5) {$z^{B,j}_i$};
\draw[arrow] (zb1) -- (9.2, 3.5) -- (9.2, 4.4);
\draw[dashed, semithick, arrow] (9.2, 4.5) -- (9.2, 5.25) -- (8.5, 5.25);
\node        (zb2) at (8.0, 5.25) {$z^{B,j}_{i+1}$};


\end{tikzpicture}

\end{document}
